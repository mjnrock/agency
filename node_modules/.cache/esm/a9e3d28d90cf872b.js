let Context,Validator,Registry,Observer;_90c‍.w("../Context",[["default",["Context"],function(v){Context=v}]]);_90c‍.w("../Validator",[["default",["Validator"],function(v){Validator=v}]]);_90c‍.w("../Registry",[["default",["Registry"],function(v){Registry=v}]]);_90c‍.w("../Observer",[["default",["Observer"],function(v){Observer=v}]]);




const reg = new Registry();

const val1 = new Validator(
    (state) => Date.now() > state.lastTimestamp - 50,
);
reg.alias(val1, "Incrementor");

const ctx = new Context({
    lastTimestamp: Date.now(),
    count: 0,
}, [
    (state, validatorId) => {
        if(validatorId === reg.getId("Incrementor")) {
            return ({
                lastTimestamp: Date.now(),
                count: state.count + 1,
            })
        }
    },
]);
const obs = new Observer(ctx, _90c‍.g.console.log);

// //! Unattached execution (<Context.state> is not natively passed to unattached executions)
ctx.attempt(val1, ctx.state);
ctx.attempt(val1, ctx.state);
console.warn(`[Test]: Expected - ${ 2 } | Actual - ${ ctx.state.count }`);

// //! Attached execution
// ctx.attach(val1);
// ctx.run();
// ctx.run();
// console.info(`[Test]: Expected - ${ 4 } | Actual - ${ ctx.state.count }`);